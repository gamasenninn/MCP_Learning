- テストはuvを使う

# リファクタリングの教訓（Chapter10の経験から）

## 動いているコードを壊すな
- テストが通っているコードは貴重な資産
- 形式的な改善のために実質を壊してはいけない
- 小さな問題に囚われて全体の価値を見失うな
- 「完璧」より「動作する」ことが重要

## コードレビューの心得
- 行数だけで「神クラス」と判断するな
- 処理フローの明確さと保守性を重視せよ
- 完璧主義に陥らず、実用性を優先せよ
- 枝葉末節より本質的な価値を見る

## リファクタリング前のチェックリスト
1. 現在のテストは全て通っているか？
2. 処理フローは本当に複雑か？
3. 依存関係は本当に問題か？
4. リファクタリングの利益はリスクを上回るか？
5. 既存の設計に隠れた良さはないか？

## Chapter10の具体的な学び
- MCPAgent 638行は許容範囲内だった
- 無理な責務分離（RequestCoordinator等）は逆に複雑化を招く  
- Phase 1（エラー処理改善）は成功、Phase 2（アーキテクチャ分離）は失敗
- 168個のテストが通るコードの価値を軽視してはいけない

## レビュー優先順位
1. **動作確認**（テスト結果）
2. **構造理解**（処理フロー） 
3. **実用性評価**（ユーザー価値）
4. **形式的問題**（動作に影響しない警告など）← 最後